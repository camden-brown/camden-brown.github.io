/* Override default link underline for timeline company links */
.timeline ul:not(ul ul) > li > a:not(:hover) {
  border-bottom: none !important;
}
/* Timeline company links styling */
.timeline ul:not(ul ul) > li > a {
  color: var(--background-modifier-success);
  text-decoration: underline;
  background: none;
  padding: 0;
  font-size: inherit;
  font-weight: inherit;
  border: none;
  box-shadow: none;
  transition: color 0.2s;
}
.timeline ul:not(ul ul) > li > a:hover {
  color: var(--interactive-success);
}
.timeline.spaced-lines ul:not(ul ul) > li:nth-child(3n) p {
  line-height: 1.7rem;
}

:root {
  --background-modifier-success: #4caf50;
  --background-modifier-error: #f44336;
  --background-modifier-error-hover: #e57373;
  --text-accent: #2196f3;
  --text-accent-hover: #1976d2;
  --text-error: #d32f2f;
  --text-error-hover: #b71c1c;
  --text-selection: #90caf9;
  --interactive-accent: #ff9800;
  --interactive-accent-hover: #f57c00;
  --interactive-success: #388e3c;
  --background-primary: #fff;
  --background-primary-alt: #BLACK;
  --text-normal: #212121;
}

.timeline {
  --timeline-active-color: var(--background-modifier-success);
}

.timeline.active-color-background-modifier-success {
  --timeline-active-color: var(--background-modifier-success);
}

.timeline.active-color-background-modifier-error {
  --timeline-active-color: var(--background-modifier-error);
}

.timeline.active-color-background-modifier-error-hover {
  --timeline-active-color: var(--background-modifier-error-hover);
}

.timeline.active-color-text-accent {
  --timeline-active-color: var(--text-accent);
}

.timeline.active-color-text-accent-hover {
  --timeline-active-color: var(--text-accent-hover);
}

.timeline.active-color-text-error {
  --timeline-active-color: var(--text-error);
}

.timeline.active-color-text-error-hover {
  --timeline-active-color: var(--text-error-hover);
}

.timeline.active-color-text-selection {
  --timeline-active-color: var(--text-selection);
}

.timeline.active-color-interactive-accent {
  --timeline-active-color: var(--interactive-accent);
}

.timeline.active-color-interactive-accent-hover {
  --timeline-active-color: var(--interactive-accent-hover);
}

.timeline.active-color-interactive-success {
  --timeline-active-color: var(--interactive-success);
}

.timeline ul:not(ul ul) {
  display: grid;
  grid-template-columns: auto auto 1fr;
  column-gap: 1.5rem;
  margin: 2.3rem 0;
}
.timeline ul:not(ul ul) > li {
  list-style: none;
}
.timeline ul:not(ul ul) > li > *:first-child {
  margin-top: 0;
}
.timeline ul:not(ul ul) > li > *:last-child {
  margin-bottom: 0;
}
.timeline ul:not(ul ul) > li:nth-child(3n),
.timeline ul:not(ul ul) > li:nth-child(3n + 2) {
  grid-column: 3;
}
/* Remove font and padding from anchor tags, keep for other elements */
.timeline ul:not(ul ul) > li:nth-child(3n + 1),
.timeline ul:not(ul ul) > li:nth-child(3n + 2) {
  display: flex;
  flex-direction: column;
  justify-content: center;
  font-size: 1rem;
  font-weight: bold;
}
.timeline ul:not(ul ul) > li:nth-child(3n + 1) > *:not(a),
.timeline ul:not(ul ul) > li:nth-child(3n + 2) > *:not(a) {
  font-size: 1.3rem;
  font-weight: bold;
}
.timeline ul:not(ul ul) > li:nth-child(3n + 1) {
  grid-column: 1;
  position: relative;
  justify-self: right;
  text-align: right;
}
.timeline ul:not(ul ul) > li:nth-child(3n + 1)::before,
.timeline ul:not(ul ul) > li:nth-child(3n + 1)::after {
  content: ' ';
  position: absolute;
  height: 100%;
  width: 0.5rem;
  right: -2rem;
  top: 0;
}
.timeline ul:not(ul ul) > li:nth-child(3n + 1)::before {
  background-color: var(--background-primary);
}
.timeline ul:not(ul ul) > li:nth-child(3n + 1)::after {
  background-color: var(--text-normal);
  opacity: 0.25;
}
.timeline ul:not(ul ul) > li:nth-child(3n) {
  position: relative;
  margin-bottom: 4.5rem;
  padding-top: 0.4em;
}
.timeline ul:not(ul ul) > li:nth-child(3n)::after {
  content: ' ';
  position: absolute;
  border-bottom: 0.1rem dashed var(--text-normal);
  opacity: 0.1;
  width: 100%;
  left: 0;
  bottom: -2.25rem;
  transform: translateY(50%);
}
.timeline ul:not(ul ul) > li:nth-child(3n):last-child {
  margin-bottom: 0.4em;
}
.timeline ul:not(ul ul) > li:nth-child(3n):last-child::after {
  display: none;
}
.timeline ul:not(ul ul)::before {
  content: '';
  height: 100%;
  width: 0.5rem;
  grid-column: 2 / span 1;
  grid-row-start: 1;
  grid-row-end: span 1000;
  background-color: var(--text-normal);
  opacity: 0.1;
}

.timeline.body-2 ul:not(ul ul) > li:nth-child(3n + 2),
.timeline.body-2 ul:not(ul ul) > li:nth-child(3n),
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n + 2),
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n),
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n + 2),
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n) {
  background-color: var(--background-primary-alt);
}
.timeline.body-2 ul:not(ul ul) > li:nth-child(3n),
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n),
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n) {
  margin-bottom: 2.25rem;
}
.timeline.body-2 ul:not(ul ul) > li:nth-child(3n):last-child,
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n):last-child,
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n):last-child {
  margin-bottom: 0.4em;
}
.timeline.body-2 ul:not(ul ul) > li:nth-child(3n)::after,
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n)::after,
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n)::after {
  display: none;
}

.timeline.body-2 ul:not(ul ul) > li:nth-child(3n),
.timeline.body-2 ul:not(ul ul) > li:nth-child(3n + 2),
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n),
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n + 2) {
  padding: 1.5rem;
  padding-top: 0.4em;
}
.timeline.body-2 ul:not(ul ul) > li:nth-child(3n + 2),
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n + 2) {
  padding-bottom: 0;
}
.timeline.body-2 ul:not(ul ul) > li:nth-child(3n + 1),
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n + 1) {
  margin-top: 0.4em;
}

.timeline.body-2 ul:not(ul ul) > li:nth-child(3n + 2) {
  border-radius: 1.5rem 1.5rem 0 0;
}
.timeline.body-2 ul:not(ul ul) > li:nth-child(3n) {
  border-radius: 0 0 1.5rem 1.5rem;
}

.timeline.body-3 ul:not(ul ul) > li:nth-child(3n + 2),
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n) {
  margin-left: 1rem;
}
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n + 2) {
  position: relative;
  background: var(--timeline-active-color);
  padding-left: 1.5rem;
  padding-right: 1.5rem;
}
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n + 2)::before {
  content: '';
  position: absolute;
  width: 2rem;
  background: var(--timeline-active-color);
  top: 0;
  bottom: 0;
  left: -1rem;
  clip-path: polygon(1rem 0, 100% 0, 100% 100%, 1rem 100%, 0 50%);
}
.timeline.body-3 ul:not(ul ul) > li:nth-child(3n) {
  padding: 1.5rem;
}

.timeline.body-4 ul:not(ul ul) > li:nth-child(3n + 2),
.timeline.body-4 ul:not(ul ul) > li:nth-child(3n) {
  border-left: 0.3rem solid var(--timeline-active-color);
}

.timeline.line-2 ul:not(ul ul) > li:nth-child(3n + 1)::before,
.timeline.line-2 ul:not(ul ul) > li:nth-child(3n + 1)::after {
  right: -2.2rem;
  top: 50%;
  transform: translateY(-50%);
  border-radius: 50%;
}
.timeline.line-2 ul:not(ul ul) > li:nth-child(3n + 1)::before {
  height: 1.2rem;
  width: 1.2rem;
}
.timeline.line-2 ul:not(ul ul) > li:nth-child(3n + 1)::after {
  background: transparent;
  border: 0.2rem solid var(--text-normal);
  height: 0.8rem;
  width: 0.8rem;
  opacity: 0.15;
}
.timeline.line-2 ul:not(ul ul)::before {
  width: 0.2rem;
  opacity: 0.15;
}

.timeline.line-3 ul:not(ul ul) > li:nth-child(3n + 1)::before {
  background: var(--timeline-active-color);
  height: 1rem;
  width: 1rem;
  border: 0.3rem solid var(--background-primary);
  right: -2.45rem;
  top: 50%;
  transform: translateY(-50%);
  border-radius: 50%;
}
.timeline.line-3 ul:not(ul ul) > li:nth-child(3n + 1)::after {
  background: transparent;
}
.timeline.line-3 ul:not(ul ul)::before {
  width: 0.3rem;
  opacity: 0.15;
}

.timeline.line-4 ul:not(ul ul) > li:nth-child(3n + 1)::before,
.timeline.line-4 ul:not(ul ul) > li:nth-child(3n + 1)::after {
  top: 50%;
  transform: translateY(-50%);
  border-radius: 50%;
}
.timeline.line-4 ul:not(ul ul) > li:nth-child(3n + 1)::before {
  background: var(--text-normal);
  height: 1.3rem;
  width: 1.3rem;
  right: -2.225rem;
}
.timeline.line-4 ul:not(ul ul) > li:nth-child(3n + 1)::after {
  opacity: 1;
  background: var(--timeline-active-color);
  height: 0.85rem;
  width: 0.85rem;
  right: -2rem;
}
.timeline.line-4 ul:not(ul ul)::before {
  opacity: 1;
  width: 0.15rem;
  background-color: transparent;
  background-image: linear-gradient(
    var(--text-normal) 60%,
    rgba(255, 255, 255, 0) 0%
  );
  background-position: right;
  background-size: 0.15rem 1.5rem;
  background-repeat: repeat-y;
}

.timeline.line-5 ul:not(ul ul) > li:nth-child(3n + 1)::before,
.timeline.line-5 ul:not(ul ul) > li:nth-child(3n + 1)::after {
  top: 50%;
}
.timeline.line-5 ul:not(ul ul) > li:nth-child(3n + 1)::before {
  width: 3rem;
  height: 3rem;
  right: -3.1rem;
  transform: translateY(-50%);
}
.timeline.line-5 ul:not(ul ul) > li:nth-child(3n + 1)::after {
  width: 1rem;
  height: 1rem;
  right: 0;
  transform: translateY(-50%) translateX(2.1rem) rotate(45deg);
}
.timeline.line-5 ul:not(ul ul)::before {
  width: 0.2rem;
  opacity: 0.25;
}

/* Skills panel styling */
.skills-panel {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin: 1.25rem 0 2rem;
}

.skill-badge {
  --badge-bg: linear-gradient(135deg, #1e293b, #0f172a 55%, #172554);
  background: var(--badge-bg);
  color: #e2e8f0;
  font-size: 0.72rem;
  letter-spacing: 0.5px;
  padding: 0.45rem 0.7rem 0.4rem;
  border-radius: 0.55rem;
  font-weight: 600;
  line-height: 1;
  position: relative;
  border: 1px solid rgba(255, 255, 255, 0.06);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.25),
    inset 0 0 0 1px rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.3s ease;
}

.skill-badge::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at 30% 25%,
    rgba(255, 255, 255, 0.15),
    transparent 70%
  );
  border-radius: inherit;
  pointer-events: none;
}

.skill-badge:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.35),
    0 0 0 1px rgba(255, 255, 255, 0.12);
}

@media (prefers-color-scheme: light) {
  .skill-badge {
    --badge-bg: linear-gradient(135deg, #ffffff, #f1f5f9 55%, #e2e8f0);
    color: #1e293b;
    border: 1px solid rgba(0, 0, 0, 0.08);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12),
      inset 0 0 0 1px rgba(255, 255, 255, 0.4);
  }
  .skill-badge:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.18), 0 0 0 1px rgba(0, 0, 0, 0.12);
  }
}

/* Compact achievements list when used under summary */
ul.achievements {
  margin-left: 0;
  padding-left: 1.1rem;
}
ul.achievements li {
  margin-bottom: 0.4rem;
}

/* Skill groups */
.skills-groups {
  display: grid;
  gap: 1.75rem 2rem;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  margin-bottom: 2.2rem;
}
.skills-group-title {
  font-size: 0.75rem;
  font-weight: 700;
  letter-spacing: 1px;
  text-transform: uppercase;
  opacity: 0.75;
  margin: 0 0 0.5rem 0.25rem;
  position: relative;
}
.skills-group-title:before {
  position: absolute;
  left: 0;
  top: 50%;
  width: 4px;
  height: 14px;
  border-radius: 2px;
  background: linear-gradient(var(--timeline-active-color), var(--text-normal));
  transform: translateY(-50%);
  opacity: 0.35;
}
.skills-group .skills-panel {
  margin-top: 0.25rem;
}

@media (max-width: 640px) {
  .skills-groups {
    grid-template-columns: 1fr;
  }
}

/* Job specific skill panels inside timeline */
.timeline .job-skills {
  margin: 0.75rem 0 0.25rem;
  gap: 0.4rem;
  padding-top: 0.25rem;
}
.timeline .job-skills .skill-badge {
  font-size: 0.63rem;
  padding: 0.35rem 0.55rem 0.32rem;
  border-radius: 0.45rem;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25),
    inset 0 0 0 1px rgba(255, 255, 255, 0.03);
}
.timeline .job-skills .skill-badge:hover {
  transform: translateY(-1px);
}

/* Dark theme adjustments: lighten timeline dotted vertical ruler for better contrast */
@media (prefers-color-scheme: dark) {
  .timeline.line-4 ul:not(ul ul)::before {
    background-image: linear-gradient(
      rgba(255, 255, 255, 0.55) 60%,
      rgba(255, 255, 255, 0) 0%
    );
  }
  /* Optional: brighter outer ring for timeline nodes (comment out if not desired) */
  .timeline.line-4 ul:not(ul ul) > li:nth-child(3n + 1)::before {
    background: #f5f7fa;
  }
  /* Keep inner active dot color but improve contrast if background active color is dark */
  .timeline.line-4 ul:not(ul ul) > li:nth-child(3n + 1)::after {
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.3);
  }
}
